name: kubernetes
managedComponents:
  - version: v1.20.5+vmware.2-fips.1
    upstreamTag: v1.20.5
    mirrorCherryPicks:
      - sha: 4855dcf19390129e79b83c932c4be7e0c55fe8aa
        description: 'this commit changes the base image registry to point to vmware internal
                      artifactory: kscom-docker-local.artifactory.eng.vmware.com'
      - sha: 024275a23fa6b677b921d9659e02c1394db1846d
        description: fixes to 'docker save' to work in cayman env
      - sha: bf398923b181c5a147877d58ef9dd174e78d0894
        description: set pause version to 3.2 in makefile
      - sha: b05c74892c3e8770ce98f27edcbae3ebb0c86d61
        description: 'change build conformance image to pull debian image from harbor cache registry'
      - sha: 55a28a57b281f8aca6da5c287fe85bd5422eff8a
        description: 'kube-cross image + tag can be set for build-image'
      - sha: 2996d35fa142143573b27b79bb3561446eb136e8
        description: "ENV vars can override pause's kube-cross version"
      - sha: a3cfb0f2ceb59f96d7febb4ee85cc5c50d8167db # BACKPORT `a3cfb0f` NOT-NEEDED after v1.21.0
        description: "BACKPORT FROM UPSTREAM: 'Prevent CGO and STATIC_OVERRIDES from trampling themselves if sourced multiple times'"
      - sha: d22f89762ec7d36839827c52e5e999d882990901
        description: "Allow override of `CGO_ENABLED=0` and use `distroless/base` for server images"
    gobuildBaseBranch: vmware-1.20.0+vmware.0~d0be0e8145e07597b84b7ca3669edf49562012cd
    dependencies:
      gobuild.golangVersion: 1.15.8
      gobuild.containerNamePrefix: projects.registry.vmware.com/tkg
      gobuild.debian_base_image: debian-base-amd64:buster-v1.2.0
      gobuild.debian_iptable_image: debian-iptables-amd64:buster-v1.3.0
      gobuild.linux_hosttype: linux-centos8
      gobuild.pause: 3.2
      generateDebRpmChangelog: true
      kubeadmAPIVersion: kubeadm.k8s.io/v1beta2
      gobuild.kubeCrossImageRef: '{{index (getElementFromSlice (convertSliceOfInterfaceToSliceOfMapStringInterface (index .refbuildinfo "componentBuilds")) "name" "kubernetes_release" "version" "v0.8.0+vmware.1-fips.1") "artifactURL" "kube-cross" "url"}}'
      gobuild.kubeCgoOverrides: 'kube-apiserver kube-controller-manager kube-scheduler kube-proxy kubeadm'
    componentReferences:
      - name: cni_plugins
        version:
          - v0.8.7+vmware.6-fips.1
      - name: coredns
        version:
          - v1.7.0+vmware.8-fips.1
      - name: cri_tools
        version:
          - v1.19.0+vmware.3-fips.1
      - name: etcd
        version:
          - v3.4.13+vmware.7-fips.1
      - name: containerd
        version:
          - v1.4.4+vmware.3-fips.1
      - name: kubernetes_release
        version:
          - v0.8.0+vmware.1-fips.1
