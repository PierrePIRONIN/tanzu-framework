# Adding v2.publish.yaml to publish artifacts needs for TKGS image-building
# Extra artifacts needs are
# add-on yamls, antrea-photon & antrea-debian image tar

name: antrea
publish:
  - name: antreaImage
    type: image
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/images/antrea-debian-$UNDERSCOREVERSION.tar.gz
    checksumPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/images/antrea-debian-$UNDERSCOREVERSION-image-checksums.txt
    destinationPath: antrea/antrea-debian:$UNDERSCOREVERSION
  - name: antrea-debian-image-tar
    type: file
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/images/antrea-debian-$UNDERSCOREVERSION.tar.gz
    destinationPath: $CHANNEL/image-builder/antrea/$VERSION/publish/lin64/antrea/images/antrea-debian-$UNDERSCOREVERSION.tar
  - name: antrea-photon-image-tar
    type: file
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/photon/images/antrea-photon-$UNDERSCOREVERSION.tar.gz
    destinationPath: $CHANNEL/image-builder/antrea/$VERSION/publish/lin64/antrea/images/antrea-photon-$UNDERSCOREVERSION.tar
  - name: antctl
    type: file
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/executables/antctl-$VERSION.gz
    destinationPath: $CHANNEL/image-builder/antrea/$VERSION/executables/antctl-$VERSION.gz
# Uncomment after 1.20 yamls are added.
#  - name: antrea-1.20-addon-yaml
#    type: file
#    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/add-on/1.20/antrea.yaml
#    destinationPath: $CHANNEL/image-builder/antrea/$VERSION/publish/add-on/1.20/antrea.yaml
  - name: antrea-1.19-addon-yaml
    type: file
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/add-on/1.19/antrea.yaml
    destinationPath: $CHANNEL/image-builder/antrea/$VERSION/publish/add-on/1.19/antrea.yaml
nonpublish:
  - name: antctl
    type: file
    destinationPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/executables/antctl-$VERSION.gz
    checksumPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/executables/antctl-$VERSION-checksums.txt
  - name: manifests
    type: file
    destinationPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/antrea/manifests/antrea-$VERSION.yml
