# compared with v1:
# windows artifacts format changed from .tar to .zip
# linux artifacts format changed from .tar to .tar.gz
# remove the 386 artifacts, we don't build them
name: tanzu-framework
publish:
  - name: tkrImage
    type: image
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/tkr/images/tkr-controller-manager-$UNDERSCOREVERSION.tar.gz
    checksumPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/tkr/images/tkr-controller-manager-$UNDERSCOREVERSION-image-checksums.txt
    destinationPath: tanzu_core/tkr/tkr-controller-manager:$UNDERSCOREVERSION
  - name: providerTemplateImage
    type: image
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/providers/images/provider-templates/provider-templates-$UNDERSCOREVERSION.tar.gz
    checksumPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/providers/images/provider-templates/provider-templates-$UNDERSCOREVERSION-image-checksums.txt
    destinationPath: tanzu_core/provider/provider-templates:$UNDERSCOREVERSION
  - name: capabilitiesImage
    type: image
    sourcePath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/capabilities/images/capabilities-controller-manager-$UNDERSCOREVERSION.tar.gz
    checksumPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/capabilities/images/capabilities-controller-manager-$UNDERSCOREVERSION-image-checksums.txt
    destinationPath: tanzu_core/capabilities/capabilities-controller-manager:$UNDERSCOREVERSION
nonpublish:
  - name: tanzu-core-linux-amd64
    type: file
    destinationPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/tanzu_cli/tanzu-framework-linux-amd64.tar.gz
    checksumPath: ""
  - name: tanzu-core-windows-amd64
    type: file
    destinationPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/tanzu_cli/tanzu-framework-windows-amd64.zip
    checksumPath: ""
  - name: tanzu-core-darwin-amd64
    type: file
    destinationPath: http://build-squid.eng.vmware.com/build/mts/release/$BUILDID/publish/lin64/tanzu-framework/tanzu_cli/tanzu-framework-darwin-amd64.tar.gz
    checksumPath: ""
